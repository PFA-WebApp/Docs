<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Docs.utf8</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown #bookdown:version# and GitBook 2.6.7" />

  <meta property="og:title" content="Docs.utf8" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Docs.utf8" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<link href="libs/font-awesome-5.13.0/css/all.min.css" rel="stylesheet" />
<link href="libs/font-awesome-5.13.0/css/v4-shims.min.css" rel="stylesheet" />
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



<!--bookdown:title:start-->
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">
<!--bookdown:toc2:start-->
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Einführung</a></li>
<li><a href="#requirements"><span class="toc-section-number">2</span> Anforderungen</a>
<ul>
<li><a href="#funktionale-anforderungen-an-die-web-applikation"><span class="toc-section-number">2.1</span> Funktionale Anforderungen an die Web-Applikation</a>
<ul>
<li><a href="#sensorverwaltung"><span class="toc-section-number">2.1.1</span> Sensorverwaltung</a></li>
<li><a href="#dateiverwaltung"><span class="toc-section-number">2.1.2</span> Dateiverwaltung</a></li>
<li><a href="#nutzerverwaltung"><span class="toc-section-number">2.1.3</span> Nutzerverwaltung</a></li>
<li><a href="#ausleihverwaltung"><span class="toc-section-number">2.1.4</span> Ausleihverwaltung</a></li>
<li><a href="#bestandsinformation"><span class="toc-section-number">2.1.5</span> Bestandsinformation</a></li>
</ul></li>
<li><a href="#nicht-funktionale-anforderungen-an-die-web-applikation"><span class="toc-section-number">2.2</span> Nicht-funktionale Anforderungen an die Web-Applikation</a></li>
<li><a href="#zusätzliche-anforderungen"><span class="toc-section-number">2.3</span> Zusätzliche Anforderungen</a>
<ul>
<li><a href="#datenbank"><span class="toc-section-number">2.3.1</span> Datenbank</a></li>
<li><a href="#deployment"><span class="toc-section-number">2.3.2</span> Deployment</a></li>
</ul></li>
</ul></li>
<li><a href="#tech-stack"><span class="toc-section-number">3</span> Tech Stack</a>
<ul>
<li><a href="#framework"><span class="toc-section-number">3.1</span> Framework</a></li>
<li><a href="#programmiersprache"><span class="toc-section-number">3.2</span> Programmiersprache</a></li>
<li><a href="#datenbank-1"><span class="toc-section-number">3.3</span> Datenbank</a></li>
</ul></li>
<li><a href="#workflow"><span class="toc-section-number">4</span> Arbeitsprozess</a>
<ul>
<li><a href="#entwicklungsmodell"><span class="toc-section-number">4.1</span> Entwicklungsmodell</a></li>
<li><a href="#entwicklungsumgebung"><span class="toc-section-number">4.2</span> Entwicklungsumgebung</a></li>
<li><a href="#versionskontrolle"><span class="toc-section-number">4.3</span> Versionskontrolle</a></li>
</ul></li>
<li><a href="#user-guide"><span class="toc-section-number">5</span> Nutzerhilfe</a>
<ul>
<li><a href="#sidebar"><span class="toc-section-number">5.1</span> Sidebar</a></li>
<li><a href="#navbar"><span class="toc-section-number">5.2</span> Navbar</a></li>
<li><a href="#login"><span class="toc-section-number">5.3</span> Anmeldung</a>
<ul>
<li><a href="#status-nicht-angemeldet"><span class="toc-section-number">5.3.1</span> Status: Nicht angemeldet</a></li>
<li><a href="#status-angemeldet"><span class="toc-section-number">5.3.2</span> Status: Angemeldet</a></li>
</ul></li>
<li><a href="#operate"><span class="toc-section-number">5.4</span> Ausleihen &amp; Zurückgeben</a>
<ul>
<li><a href="#ausleihen-zurückgeben"><span class="toc-section-number">5.4.1</span> Ausleihen &amp; Zurückgeben</a></li>
<li><a href="#gruppen-des-ausgewählten-typs"><span class="toc-section-number">5.4.2</span> Gruppen des ausgewählten Typs</a></li>
<li><a href="#dateien"><span class="toc-section-number">5.4.3</span> Dateien</a></li>
</ul></li>
<li><a href="#reporting"><span class="toc-section-number">5.5</span> Bestandsinformation</a>
<ul>
<li><a href="#bestandsübersicht"><span class="toc-section-number">5.5.1</span> Bestandsübersicht</a></li>
<li><a href="#ausleihübersicht"><span class="toc-section-number">5.5.2</span> Ausleihübersicht</a></li>
</ul></li>
<li><a href="#user-management"><span class="toc-section-number">5.6</span> Nutzerverwaltung <span class="badge admin">A</span> <span class="badge mod">M</span></a>
<ul>
<li><a href="#nutzer-hinzufügen"><span class="toc-section-number">5.6.1</span> Nutzer hinzufügen</a></li>
<li><a href="#nutzertabelle"><span class="toc-section-number">5.6.2</span> Nutzertabelle</a></li>
</ul></li>
<li><a href="#group"><span class="toc-section-number">5.7</span> Gruppen <span class="badge admin">A</span></a>
<ul>
<li><a href="#gruppe-hinzufügen"><span class="toc-section-number">5.7.1</span> Gruppe hinzufügen</a></li>
<li><a href="#gruppentabelle"><span class="toc-section-number">5.7.2</span> Gruppentabelle</a></li>
<li><a href="#typen-anzeigen"><span class="toc-section-number">5.7.3</span> Typen anzeigen</a></li>
</ul></li>
<li><a href="#type"><span class="toc-section-number">5.8</span> Sensortypen <span class="badge admin">A</span></a>
<ul>
<li><a href="#typ-hinzufügen"><span class="toc-section-number">5.8.1</span> Typ hinzufügen</a></li>
<li><a href="#typtabelle"><span class="toc-section-number">5.8.2</span> Typtabelle</a></li>
<li><a href="#gruppen-anzeigen"><span class="toc-section-number">5.8.3</span> Gruppen anzeigen</a></li>
<li><a href="#untertypen-bearbeiten"><span class="toc-section-number">5.8.4</span> Untertypen bearbeiten</a></li>
</ul></li>
<li><a href="#file-management"><span class="toc-section-number">5.9</span> Dateiverwaltung <span class="badge admin">A</span></a></li>
<li><a href="#qrcode"><span class="toc-section-number">5.10</span> QR-Code <span class="badge admin">A</span></a></li>
<li><a href="#settings"><span class="toc-section-number">5.11</span> Einstellungen</a>
<ul>
<li><a href="#benutzernamen-ändern"><span class="toc-section-number">5.11.1</span> Benutzernamen ändern</a></li>
<li><a href="#passwort-ändern"><span class="toc-section-number">5.11.2</span> Passwort ändern</a></li>
</ul></li>
</ul></li>
<li><a href="#technical-guide"><span class="toc-section-number">6</span> Technische Umsetzung</a>
<ul>
<li><a href="#struktur-der-web-applikation"><span class="toc-section-number">6.1</span> Struktur der Web-Applikation</a>
<ul>
<li><a href="#struktur-von-app.r"><span class="toc-section-number">6.1.1</span> Struktur von <code>app.R</code></a></li>
<li><a href="#ordnerstruktur"><span class="toc-section-number">6.1.2</span> Ordnerstruktur</a></li>
</ul></li>
<li><a href="#database"><span class="toc-section-number">6.2</span> Datenbank</a>
<ul>
<li><a href="#struktur"><span class="toc-section-number">6.2.1</span> Struktur</a></li>
<li><a href="#zugriff"><span class="toc-section-number">6.2.2</span> Zugriff</a></li>
</ul></li>
<li><a href="#cookies"><span class="toc-section-number">6.3</span> Cookies</a>
<ul>
<li><a href="#dark-mode"><span class="toc-section-number">6.3.1</span> dark-mode</a></li>
<li><a href="#user-1"><span class="toc-section-number">6.3.2</span> user</a></li>
<li><a href="#implementierung"><span class="toc-section-number">6.3.3</span> Implementierung</a></li>
</ul></li>
<li><a href="#deployment-1"><span class="toc-section-number">6.4</span> Deployment</a></li>
</ul></li>
<li><a href="#discussion"><span class="toc-section-number">7</span> Diskussion und Ausblick</a></li>
<li><a href="#references"><span class="toc-section-number">8</span> Referenzen</a></li>
</ul>
<!--bookdown:toc2:end-->
      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div style="page-break-after: always;"></div>
<div style="page-break-after: always;"></div>
<div style="page-break-after: always;"></div>
<pre><code>## Warning: package &#39;shiny&#39; was built under R version 4.0.3</code></pre>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 4.0.4</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div id="introduction" class="section level1" number="1">
<h1 number="1"><span class="header-section-number">1</span> Einführung</h1>
<p>Die Verwaltung von Messmitteln am Fachgebiet Fahrzeugantriebe der Technischen Universität Berlin gestaltet sich schwierig. Zurzeit werden Messmittel dezentral verwaltet. Die handelnden Personen besitzen wenig Information über den Ausleihzustand einzelner Messmittel über verschiedene Projekte hinweg. Daher hat sich das Fachgebiet entschlossen, im Rahmen des Moduls “Projekt Fahrzeugantriebe” eine Web-Applikation zur Verwaltung von Messmitteln zu erstellen. Diese Web-Applikation soll die Ausleihe und Rückgabe einzelner Messmittel über einen QR-Code realisieren. Darüber hinaus sollen Messmittel gruppiert, zusätzliche Informationen, wie zum Beispiel Datenblätter für Messmittel, bereitgestellt und der Bestand von Messmitteln erfasst werden. Um die unterschiedlichen Verantwortlichkeiten der Akteure zu berücksichtigen, ist zudem eine rechtebasierte Nutzerverwaltung vorzusehen.</p>
<p>Der Inhalt dieses Berichtes umfasst die Dokumentation des Arbeitsprozesses, die Beschreibung des finalen Produktes hinsichtlich technischer Umsetzung und Funktionalität und zeigt zusätzlich Anknüpfungspunkte für Folgeprojekte auf.</p>
<p>Messmittel = Sensor <span class="citation">(<a href="#ref-R-rmarkdown" role="doc-biblioref">Allaire et al. 2020</a>)</span></p>
<!--chapter:end:index.Rmd-->
</div>
<div id="requirements" class="section level1" number="2">
<h1 number="2"><span class="header-section-number">2</span> Anforderungen</h1>
<p>Aus der vom Fachgebiet bereitgestellten Aufgabenstellung wurden unmittelbar die folgenden Anforderungen abgeleitet: Aufbauend auf einer Literaturrecherche soll ein Konzept zur Erstellung einer Web-Applikation entworfen werden. Die Umsetzung besteht aus der Programmierung der entworfenen Web-Applikation sowie dem Anlegen einer zugehörigen Datenbank auf dem Server des Fachgebiets. Die verwendeten Technologien sind dabei begründet frei zu wählen. Die konkreten Anforderungen an die Web-Applikation sind dabei aus dem in der Aufgabenstellung beschriebenen Funktionstest abgeleitet worden:</p>
<ul>
<li>Erstellen von Sensoren</li>
<li>Erstellen von Nutzern</li>
<li>Matching unterschiedlicher Sensortypen mit jeweils einem QR-Code</li>
<li>Ausleihe und Rückgabe von Sensoren</li>
<li>Konsistente Datenverwaltung in Form einer Datenbank</li>
</ul>
<p>Diese Anforderungen stellen den minimalen Satz an Anforderungen dar. Während der Bearbeitung des Projektes zeigte sich, dass zusätzliche Anforderungen notwendig sind, um einen zweckmäßigen Einsatz am Fachgebiet sicherzustellen. Die Web-Applikation soll beispielsweise sowohl von Studenten, wissenschaftlichen Mitarbeitern und speziell geschultem Personal (üblicherweise wissenschaftliche Mitarbeiter) mit unterschiedlichen Verantwortlichkeiten genutzt werden. Daher müssen die Minimalanforderungen erweitert werden. Nutzer besitzen unterschiedliche Rechte und müssen sich gegenüber der Web-Applikation authentifizieren. Der finale Satz an Anforderungen kann den folgenden Abschnitten zu funktionalen und nicht-funktionalen Anforderungen entnommen werden.</p>
<div id="funktionale-anforderungen-an-die-web-applikation" class="section level2" number="2.1">
<h2 number="2.1"><span class="header-section-number">2.1</span> Funktionale Anforderungen an die Web-Applikation</h2>
<p>Funktionale Anforderungen spiegeln den Funktionsumfang der Web-Applikation wider. Die Vielzahl funktionaler Anforderungen bedingt ein Aufgliedern in verschiedene Funktionsbereiche, die im Folgenden detailliert beschrieben werden.</p>
<div id="sensorverwaltung" class="section level3" number="2.1.1">
<h3 number="2.1.1"><span class="header-section-number">2.1.1</span> Sensorverwaltung</h3>
<p>Die Sensoren am Fachgebiet stehen untereinander in Beziehung: Ein Versuchsaufbau kann sich aus verschiedenen Sensoren zusammensetzen. Dabei ist weniger der Sensor als viel mehr seine Art von Interesse. So ist es zum Beispiel unerheblich von welchem Hersteller oder aus welcher Serie ein konkreter Sensor ist, solange die gleiche Funktionalität erbracht wird. Der konkrete Sensor wird als <em>Untertyp</em> bezeichnet. Die Funktionalität, die alle <em>Untertypen</em> verbindet, spiegelt sich im <em>Typen</em> wider. Ein Versuchsaufbau ist schließlich eine <em>Gruppe</em>, die verschiedene <em>Typen</em> beinhaltet. Zusammenfassend lässt sich festhalten:</p>
<blockquote>
<p>Jeder Sensor hat einen <em>Untertypen</em>. Mehrere nur geringfügig unterschiedliche <em>Untertypen</em> werden in einem <em>Typen</em> zusammengefasst. Mehrere <em>Typen</em> können Teil einer <em>Gruppe</em> sein. Ein <em>Typ</em> kann Teil mehrerer Gruppen sein.</p>
</blockquote>
<p>Ausgehend von diesen Definitionen sind die folgenden Anforderungen zu erfüllen:</p>
<ul>
<li>Erstellen und Entfernen von <em>Gruppen</em>, <em>Typen</em> und <em>Untertypen</em></li>
<li>Umbenennen von <em>Gruppen</em>, <em>Typen</em> und <em>Untertypen</em></li>
<li>Bestandserfassung auf Ebene der <em>Untertypen</em></li>
<li>Matching von QR-Codes auf Ebene der <em>Typen</em></li>
<li>Verknüpfung von <em>Gruppen</em> mit <em>Typen</em> und von <em>Typen</em> mit <em>Untertypen</em></li>
</ul>
</div>
<div id="dateiverwaltung" class="section level3" number="2.1.2">
<h3 number="2.1.2"><span class="header-section-number">2.1.2</span> Dateiverwaltung</h3>
<ul>
<li>Hochladen, Umbenennen und Löschen von Datenblättern im PDF-Format für <em>Gruppen</em>, <em>Typen</em> und <em>Untertypen</em></li>
<li>Herunterladen von einzelnen Datenblättern als PDF-Datei oder mehreren Datenblättern komprimiert in einer zip-Datei</li>
</ul>
</div>
<div id="nutzerverwaltung" class="section level3" number="2.1.3">
<h3 number="2.1.3"><span class="header-section-number">2.1.3</span> Nutzerverwaltung</h3>
<p>Wie eingangs beschrieben, ist eine rechtebasierte Verwaltung notwendig. Dazu werden drei Rollen angelegt. Der <em>Benutzer</em> kann Sensoren ausleihen und zurückgeben. Er kann seinen Benutzernamen und sein Passwort ändern. Der <em>Moderator</em> kann zusätzlich <em>Benutzer</em> anlegen. Der <em>Administrator</em> kann zusätzlich auf die Sensorverwaltung zugreifen und Nutzer mit einer beliebigen Rolle anlegen. Eine genaue Aufschlüsselung der Rechte der drei Rollen - und somit der Anforderungen an die Nutzerverwaltung - kann Tabelle @ref(tab:user-rights) entnommen werden.</p>
<table>
<caption>(#tab:user-rights) Übersicht über die Nutzerrollen</caption>
<thead>
<tr class="header">
<th align="left">Operation</th>
<th align="center"><span class="badge admin">Administrator</span></th>
<th align="center"><span class="badge mod">Moderator</span></th>
<th align="center"><span class="badge user">Benutzer</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Ausleihen &amp; Zurückgeben</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
</tr>
<tr class="even">
<td align="left">Erweiterte Bestandsinformation</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">Nutzer hinzufügen / löschen</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">Moderator hinzufügen / löschen</td>
<td align="center">x</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">QR-Code generieren</td>
<td align="center">x</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">Sensoren verwalten</td>
<td align="center">x</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">Dateien verwalten</td>
<td align="center">x</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="ausleihverwaltung" class="section level3" number="2.1.4">
<h3 number="2.1.4"><span class="header-section-number">2.1.4</span> Ausleihverwaltung</h3>
<ul>
<li>Ausleihe und Rückgabe von <em>Untertypen</em> beliebiger Menge innerhalb eines verfügbaren Rahmens durch Nutzer oder für beliebigen Nutzer durch <em>Administrator</em></li>
<li>Abschreiben von <em>Untertypen</em> durch <em>Administratoren</em></li>
<li>Anzeige von Datenblättern für <em>Gruppen</em>, <em>Typen</em> und <em>Untertypen</em></li>
</ul>
</div>
<div id="bestandsinformation" class="section level3" number="2.1.5">
<h3 number="2.1.5"><span class="header-section-number">2.1.5</span> Bestandsinformation</h3>
<p>Um ohne Betreten des Lagerortes ermitteln zu können, wie viele Elemente eines <em>Typen</em> oder <em>Untertypen</em> verfügbar sind oder festzustellen, welcher Nutzer einen benötigten <em>Typen</em> ausgeliehen hat, ist eine Übersicht über den Bestand und die Ausleihhistorie zu implementieren.</p>
</div>
</div>
<div id="nicht-funktionale-anforderungen-an-die-web-applikation" class="section level2" number="2.2">
<h2 number="2.2"><span class="header-section-number">2.2</span> Nicht-funktionale Anforderungen an die Web-Applikation</h2>
<p>Für einen nachhaltigen Einsatz der Web-Applikation sind die folgenden nicht-funktionalen Anforderungen zu erfüllen:</p>
<ul>
<li>Intuitive Nutzerführung</li>
<li>Konsistenz durch wiedererkennbares Layout und Design</li>
<li>Performance</li>
</ul>
<p>Aufgrund ihres nicht-funktionalen Charakters ist die Erfüllung nicht an konkrete Bedingungen geknüpft. Alle unternommenen Bestrebungen zur Erfüllung der funktionalen Anforderungen sind stets hinsichtlich der hier aufgeführten nicht-funktionalen Anforderungen zu bewerten.</p>
</div>
<div id="zusätzliche-anforderungen" class="section level2" number="2.3">
<h2 number="2.3"><span class="header-section-number">2.3</span> Zusätzliche Anforderungen</h2>
<p>Zusätzlich soll eine Datenbank für die konsistente Verwaltung der anzulegenden Daten genutzt werden. Die Web-Applikation und die Datenbank sollen auf einer virtuellen Maschine (<em>VM</em>), die auf einem Server des Fachgebiets abgelegt wird, betrieben werden.</p>
<div id="datenbank" class="section level3" number="2.3.1">
<h3 number="2.3.1"><span class="header-section-number">2.3.1</span> Datenbank</h3>
<p>Die Datenbank soll die konsistente Datenverwaltung bewerkstelligen. Sie enthält Tabellen, welche entsprechend der funktionalen Anforderungen der Web-Applikation zu gestalten und miteinander zu verknüpfen sind. Hierzu müssen sowohl ein geeignetes Datenbankmodell als auch ein konkretes Datenbankmanagementsystem ausgewählt werden.</p>
</div>
<div id="deployment" class="section level3" number="2.3.2">
<h3 number="2.3.2"><span class="header-section-number">2.3.2</span> Deployment</h3>
<p>Als Deployment wird die Integration der Web-Applikation und der Datenbank in die bestehende Infrastruktur bezeichnet. Dazu sind folgende Schritte notwendig:</p>
<ul>
<li>Auswahl einer Virtualisierungssoftware</li>
<li>Einrichten einer <em>VM</em></li>
<li>Installation von Servern, Wartungssoftware und Programmiersprache</li>
<li>Transfer von Datenbank und Web-Applikation auf <em>VM</em></li>
</ul>
<!--chapter:end:02-anforderungen.Rmd-->
</div>
</div>
</div>
<div id="tech-stack" class="section level1" number="3">
<h1 number="3"><span class="header-section-number">3</span> Tech Stack</h1>
<p>Als Tech Stack wird die Summe der verwendeten Technologien bezeichnet. Dazu gehören zum Beispiel die Programmiersprache, das Framework für die Web-Applikation, die Datenbanksoftware, aber auch die Entwicklungsumgebung und weitere Software, die im Entwicklungsprozess verwendet wird.</p>
<div id="framework" class="section level2" number="3.1">
<h2 number="3.1"><span class="header-section-number">3.1</span> Framework</h2>
<p>Zuallererst muss das Framework zur Erstellung der Web-Applikation gewählt werden. Dieses legt normalerweise die zu verwendende Programmiersprache fest und setzt möglicherweise Restriktionen in Bezug auf weitere Software. Eine Web-Applikation zeichnet sich dadurch aus, dass sie im Webbrowser ausführbar ist. Der Webbrowser ist in der Lage, Dateien im HTML-Format (HTML: Hyper Text Markup Language) darzustellen. Das HTML-Format spezifiziert dabei ausschließlich die Struktur der Webseite. Um die visuelle Erscheinung der Webseite zu beeinflussen, können Regeln in CSS-Dateien (CSS: Cascading Style Sheet) hinterlegt werden. Für interaktives Verhalten existiert die Sprache JavaScript, die es ermöglicht, das HTML-Dokument dynamisch anzupassen.</p>
<p>Ein Framework zur Erstellung von Web-Applikationen bietet ein Grundgerüst für Layout sowie Funktionalität und stellt einen Server bereit. Für das Layout werden beispielsweise makroskopische Komponenten, wie Dashboards und Landing Pages, oder mikroskopische Komponenten, wie Inputs, Tabellen und Plots, bereitgestellt. Die Funktionalität wird abstrahiert und der Zustand der Web-Applikation modelliert. Der Server bearbeitet Anfragen von Clients, also Nutzern der Web-Applikation. Frameworks können in beliebigen Programmiersprachen implementiert werden, solange eine Schnittstelle zwischen der vom Framework verwendeten Sprache und einer dem Browser verständlichen Sprache existiert. Frameworks können hinsichtlich verschiedener Kriterien unterschieden werden. Backend-Frameworks integrieren neben einem Server meist auch noch Datenbanken, wohingegen Frontend-Frameworks ihren Fokus mehr auf dem visuellen Part legen. Multipage-Frameworks enthalten mehrere Seiten, wohingegen Singlepage-Frameworks nur eine einzige Seite darstellen.</p>
<p>Für die Bearbeitung dieses Projektes wurde das Framework Shiny gewählt, das in der Programmiersprache R implementiert ist. Hierbei handelt es sich um ein Singlepage-Framework, das als Backend den sogenannten Shiny Server enthält. Maßgeblich für die Entscheidung war, dass die beiden Autoren über Erfahrung im Umgang mit R und im Speziellen mit Shiny verfügen. Darüber hinaus zeichnet sich Shiny durch folgende Eigenschaften und Vorzüge aus:</p>
<ul>
<li>Moderne Templates</li>
<li>Fokus auf konkrete Funktionalität</li>
<li>Reaktives Zustandsmodell</li>
<li>Modularisierbarkeit</li>
<li>Für Anwendungsfall ausreichende Performance</li>
<li>Einfache Integration von Datenbanken</li>
</ul>
</div>
<div id="programmiersprache" class="section level2" number="3.2">
<h2 number="3.2"><span class="header-section-number">3.2</span> Programmiersprache</h2>
<p><a href="https://www.r-project.org/">R</a> ist eine Multiparadigmen-Programmiersprache. Je nach Anwendungsfall kann somit zum Beispiel objektorientiert oder funktional programmiert werden. R verfügt einen Pool an Standardbibliotheken und kann einfach durch selbstgeschriebene und frei verfügbare Packages erweitert werden. Das Comprehensive R Archive Network (<a href="https://cran.r-project.org/">CRAN</a>) stellt eine Vielzahl von quelloffenen Bibliotheken zur Verfügung beispielsweise {<a href="https://shiny.rstudio.com/">shiny</a>}, das die Funktionalitäten des Frameworks beinhaltet. Die folgenden Tabellen @ref(tab:pkg-shiny) und @ref(tab:pkg-programming) geben Aufschluss über die im Projekt verwendeten Packages und ihren Zweck. Packages können von anderen Packages abhängen. Es wird daher darauf verzichtet auf untergeordnete Bibliotheken einzugehen.</p>
<table>
<caption>(#tab:pkg-shiny) Packages für {shiny}</caption>
<thead>
<tr class="header">
<th>Package</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>{<a href="https://cran.r-project.org/web/packages/bs4Dash/index.html">bs4Dash</a>}</td>
<td>AdminLTE-Template</td>
</tr>
<tr class="even">
<td>{<a href="https://cran.r-project.org/web/packages/DT/index.html">DT</a>}</td>
<td>DataTables für {shiny}</td>
</tr>
<tr class="odd">
<td>{<a href="https://cran.r-project.org/web/packages/htmltools/index.html">htmltools</a>}</td>
<td>HTML-Repräsentation in R</td>
</tr>
<tr class="even">
<td>{<a href="https://cran.r-project.org/web/packages/rclipboard/index.html">rclipboard</a>}</td>
<td>Zwischenablage</td>
</tr>
<tr class="odd">
<td>{<a href="https://cran.r-project.org/web/packages/shinydisconnect/index.html">shinydisconnect</a>}</td>
<td>Verbindungsverlustbildschirm</td>
</tr>
<tr class="even">
<td>{<a href="https://cran.r-project.org/web/packages/shinyjs/index.html">shinyjs</a>}</td>
<td>Integration von Custom-JavaScript</td>
</tr>
<tr class="odd">
<td>{<a href="https://cran.r-project.org/web/packages/waiter/index.html">waiter</a>}</td>
<td>Ladebildschirm</td>
</tr>
</tbody>
</table>
<table>
<caption>(#tab:pkg-programming) Packages für die Programmierung</caption>
<thead>
<tr class="header">
<th>Package</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>{<a href="https://cran.r-project.org/web/packages/Cairo/index.html">Cairo</a>}</td>
<td>PDF-/PNG-/SVG-Erstellung</td>
</tr>
<tr class="even">
<td>{<a href="https://cran.r-project.org/web/packages/DBI/index.html">DBI</a>}</td>
<td>Datenbankinterface</td>
</tr>
<tr class="odd">
<td>{<a href="https://cran.r-project.org/web/packages/dplyr/index.html">dplyr</a>}</td>
<td>Datentransformationen</td>
</tr>
<tr class="even">
<td>{<a href="https://cran.r-project.org/web/packages/glue/index.html">glue</a>}</td>
<td>String-Erzeugung</td>
</tr>
<tr class="odd">
<td>{<a href="https://cran.r-project.org/web/packages/lubridate/index.html">lubridate</a>}</td>
<td>Datumsformat</td>
</tr>
<tr class="even">
<td>{<a href="https://cran.r-project.org/web/packages/RSQLite/index.html">RSQLite</a>}</td>
<td>SQLite-Datenbank</td>
</tr>
<tr class="odd">
<td>{<a href="https://cran.r-project.org/web/packages/stringr/index.html">stringr</a>}</td>
<td>String-Manipulation</td>
</tr>
<tr class="even">
<td>{<a href="https://cran.r-project.org/web/packages/tibble/index.html">tibble</a>}</td>
<td>Tabellenformat</td>
</tr>
<tr class="odd">
<td>{<a href="https://cran.r-project.org/web/packages/purrr/index.html">purrr</a>}</td>
<td>Funktionale Programmierung</td>
</tr>
<tr class="even">
<td>{<a href="https://cran.r-project.org/web/packages/qrcode/index.html">qrcode</a>}</td>
<td>Erstellung von QR-Codes</td>
</tr>
<tr class="odd">
<td>{<a href="https://cran.r-project.org/web/packages/renv/index.html">renv</a>}</td>
<td>Packagemanagement</td>
</tr>
<tr class="even">
<td>{<a href="https://cran.r-project.org/web/packages/yaml/index.html">yaml</a>}</td>
<td>YAML-Dateiformat</td>
</tr>
</tbody>
</table>
</div>
<div id="datenbank-1" class="section level2" number="3.3">
<h2 number="3.3"><span class="header-section-number">3.3</span> Datenbank</h2>
<p>Zur konsistenten Datenverwaltung wird eine Datenbank benötigt. Datenbanken sind in der Lage, Anfragen von verschiedenen Clients zu bearbeiten und dabei zu gewährleisten, dass bestimmte Regeln hinsichtlich der Datenstruktur und Ausprägung der Daten eingehalten werden. Es existieren verschiedene Datenbankmodelle, unter anderem das Netzwerk-, das objektorientierte, das hierachische oder das relationale Datenbankmodell.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> Diese unterscheiden sich hinsichtlich der Verknüpfung der beteiligten Daten. Aufgrund der hohen Flexibilität und der weiten Verbreitung wurde das relationale Datenbankmodell ausgewählt. Dieses speichert die Daten in miteinander verknüpften Tabellen. Die Tabellenzeilen enthalten Beobachtungen, die Tabellenspalten stellen die beobachtbaren Merkmale dar. Zur eindeutigen Identifikation erhält jede Zeile eine Identifikationsnummer. Die Spalte der Identifikationsnummern wird als Primärschlüssel (<em>Primary Key</em>) bezeichnet. Um verschiedene Tabellen miteinander zu verknüpfen, werden Identifikationsnummern referenziert. Eine Spalte, die auf einen Primärschlüssel einer anderen Tabelle verweist, wird als Fremdschlüssel (<em>Foreign Key</em>) bezeichnet.</p>
<p>Es gibt eine Vielzahl verschiedener relationaler Datenbankmanagementsysteme, die sich hinsichtlich ihrer Anwendungsbereiche und Skalierbarkeit unterscheiden. Für Projekte kleinen und mittleren Umfanges (unter 100.000 Aufrufe / Tag<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>) eignet sich <a href="https://www.sqlite.org/index.html">SQLite</a> <span class="citation">(<a href="#ref-laudon2015" role="doc-biblioref">Laudon, Laudon, and Schroeder 2015</a>)</span>. Hierbei werden alle Tabellen in einer einzigen Datei mit dem Suffix <em>.sqlite</em> gespeichert. Der Zugriff auf die Datenbank erfolgt grundsätzlich über die <em>Structured Query Language</em> (SQL). Für die Programmiersprache R gibt es die Packages {DBI} und {RSQLite}, die eine direkte Schnittstelle zur Datenbank bereitstellen.</p>
<!--chapter:end:03-tech-stack.Rmd-->
</div>
</div>
<div id="workflow" class="section level1" number="4">
<h1 number="4"><span class="header-section-number">4</span> Arbeitsprozess</h1>
<p>Neben der technischen Umsetzung ist insbesondere der Arbeitsprozess von herausragender Bedeutung. Durch diesen wird festgelegt, in welcher Weise die Anforderungen letztendlich umgesetzt werden. Für Projekte im Allgemeinen beinhaltet der Arbeitsprozess das Zeit-, Personal- und Aufgabenmanagement. Ein gut strukturierter Arbeitsprozess hilft schließlich dabei, Ergebnisse effizient und nachvollziehbar zu erzielen. In der Softwareentwicklung wird der Arbeitsprozess zusätzlich durch die Wahl von Entwicklungsmodell, Entwicklungsumgebung und Versionskontrolle bestimmt.</p>
<div id="entwicklungsmodell" class="section level2" number="4.1">
<h2 number="4.1"><span class="header-section-number">4.1</span> Entwicklungsmodell</h2>
<p>In der Softwareentwicklung existiert eine Vielzahl verschiedener Modelle zur Bewältigung eines Projektes. Die klassischen Modelle (Wasserfallmodell, V-Modell) fokussieren sich darauf, Phasen sequentiell abzuarbeiten. Im Kontrast dazu stehen die agilen Modelle, in denen alle Phasen wiederholt durchlaufen werden. Agile Modelle sind in der Regel deutlich flexibler, da die Anforderungen kontinuierlich angepasst werden können. Für kleine Entwicklungsteams bietet sich die Verwendung eines agilen Entwicklungsmodells auch deswegen an, weil der Koordinationsaufwand zwischen den Teilnehmern gering ist. Das Entwicklungsmodell legt nicht nur fest, wie das Projekt auf der Makroebene strukturiert ist, sondern auch wie auf der Mikroebene konkret programmiert wird.</p>
<p>Wir haben uns dafür entschieden, das agile Modell des Pair Programming - einer Unterform des Extreme Programming - einzusetzen. Hierbei arbeiten stets zwei Programmierer (also im vorliegenden Fall alle) gemeinsam an der Erstellung von Programmcode. Vorteile hiervon liegen im stetigen Informationsaustausch, gemeinsamer Entscheidungsfindung und geringerer Fehlerhäufigkeit. Als nachteilig wird allgemeinhin der doppelte Personalaufwand angesehen.</p>
</div>
<div id="entwicklungsumgebung" class="section level2" number="4.2">
<h2 number="4.2"><span class="header-section-number">4.2</span> Entwicklungsumgebung</h2>
<p>Als Entwicklungsumgebung wird die Software bezeichnet, die zur Erstellung und Verwaltung des Programmcodes genutzt wird. Für die Programmiersprache R empfiehlt es sich, die Entwicklungsumgebung RStudio zu verwenden. Diese ermöglicht es, Projekte anzulegen, die Web-App für das Testen unmittelbar auszuführen und den Code mit Git und GitHub für die Versionsverwaltung zu integrieren. Eine interaktive Konsole und eine integrierte Hilfe erleichtern den Arbeitsprozess.</p>
</div>
<div id="versionskontrolle" class="section level2" number="4.3">
<h2 number="4.3"><span class="header-section-number">4.3</span> Versionskontrolle</h2>
<p>Versionskontrolle ist aus vielerlei Gründen für den Softwareentwicklungsprozess unerlässlich. Sie ermöglicht es,</p>
<ul>
<li>Versionen zu verwalten,</li>
<li>Bugs durch Differenzbildung zwischen verschiedenen Versionen zu finden und zu beheben sowie</li>
<li>den Projektfortschritt zeitlich und inhaltlich nachzuvollziehen.</li>
</ul>
<p>Für die Versionskontrolle wurde Git in Verwendung mit GitHub eingesetzt. In Git werden inkrementelle Änderungen durch sogenannte Commits erfasst. Jeder Commit ist dabei mit einem Kommentar versehen. Durch sogenannte Branches können verschiedene Personen gleichzeitig zum Projekt beitragen oder verschiedene Features gleichzeitige entwickeln. Branches können wieder zusammengeführt werden (Merging). Ein Ordner, der mit Git initialisiert wurde, wird als Repository bezeichnet. Repositories können im Internet verfügbar gemacht werden und dann auf beliebigen Computern heruntergeladen werden.</p>
<p>Die Online-Plattform GitHub erleichtert die Kollaboration über Git. Sie stellt einen Ablageort für das Repository bereit und unterstützt den Arbeitsprozess durch ein Ticket-System (Issues). In diesem können Fehler und Verbesserungsvorschläge gemeldet werden. Die Issues können darüber hinaus als Notizblock für geplante Features verwendet werden.</p>
<!--chapter:end:04-arbeitsprozess.Rmd-->
</div>
</div>
<div id="user-guide" class="section level1" number="5">
<h1 number="5"><span class="header-section-number">5</span> Nutzerhilfe</h1>
<script type="text/javascript">
$(function() {
  $(".figure").click(function(e) {
    $(this).toggleClass("fullscreen");
  })
})
</script>
<p>Die folgenden Abschnitte fassen wesentliche Merkmale der Web-Applikation zusammen und erläutern ihre Bedienung. Die technischen Details können im anschließenden Kapitel nachgeschlagen werden. Die Web-Applikation ist ein Dashboard. Dieses besitzt eine Sidebar, eine Navbar und einen Body, vergleiche Abbildung @ref(fig:app-overview).</p>
<div class="figure">
<img src="img/app_overview.png" alt="Übersicht über das Dashboard"  />
<p class="caption">
(#fig:app-overview)Übersicht über das Dashboard
</p>
</div>
<div id="sidebar" class="section level2" number="5.1">
<h2 number="5.1"><span class="header-section-number">5.1</span> Sidebar</h2>
<p>In der Sidebar kann über einen Reiter die Funktionalität ausgewählt werden, die im Body dargestellt wird. Die Anzahl an Auswahlmöglichkeiten hängt vom Anmeldestatus und der Benutzerrolle ab.</p>
</div>
<div id="navbar" class="section level2" number="5.2">
<h2 number="5.2"><span class="header-section-number">5.2</span> Navbar</h2>
<p>Die Navbar enthält:</p>
<ul>
<li>einen Link zum GitHub-Repository, das den Quellcode der Web-Applikation enthält,</li>
<li>einen Reload-Button, mit dem eine Aktualisierung der Daten erzwungen werden kann,</li>
<li>einen Toggle, mit dem zwischen Tag- und Nachtmodus gewechselt werden kann.</li>
</ul>
</div>
<div id="login" class="section level2" number="5.3">
<h2 number="5.3"><span class="header-section-number">5.3</span> Anmeldung</h2>
<p>Dieser Reiter verändert sich in Abhängigkeit des Anmeldestatus.</p>
<div id="status-nicht-angemeldet" class="section level3" number="5.3.1">
<h3 number="5.3.1"><span class="header-section-number">5.3.1</span> Status: Nicht angemeldet</h3>
<p>Registrierte Benutzer können sich durch Angabe ihres Benutzernamens und ihres Passwortes anmelden, vergleiche Abbildung @ref(fig:login-mask). Nicht-registrierte Benutzer müssen sich von einem Moderator oder Administrator (Wissenschaftliche Mitarbeiter) registrieren lassen.</p>
<div class="figure">
<img src="img/login_mask.png" alt="Anmeldung - nicht angemeldet"  />
<p class="caption">
(#fig:login-mask)Anmeldung - nicht angemeldet
</p>
</div>
</div>
<div id="status-angemeldet" class="section level3" number="5.3.2">
<h3 number="5.3.2"><span class="header-section-number">5.3.2</span> Status: Angemeldet</h3>
<p>Nach erfolgreicher Anmeldung wird der Benutzer mit Informationen über sein Nutzungsverhalten versorgt, vergleiche Abbildung @ref(fig:login-mask-logged). Dargestellt werden:</p>
<ul>
<li>der Benutzername und der Benutzerstatus,</li>
<li>die Dauer seit der momentanen Anmeldung,</li>
<li>die Dauer seit der letzten Anmeldung,</li>
<li>die Anzahl der Anmeldungen.</li>
</ul>
<p>Benutzer können sich zudem abmelden.</p>
<div class="figure">
<img src="img/login_mask_logged.png" alt="Anmeldung - angemeldet"  />
<p class="caption">
(#fig:login-mask-logged)Anmeldung - angemeldet
</p>
</div>
</div>
</div>
<div id="operate" class="section level2" number="5.4">
<h2 number="5.4"><span class="header-section-number">5.4</span> Ausleihen &amp; Zurückgeben</h2>
<p>Die Ausleihe und Rückgabe setzt sich aus drei Abschnitten zusammen, vergleiche Abbildung @ref(fig:operate-overview). Im ersten Abschnitt <em>Ausleihen &amp; Zurückgeben</em> kann die konkrete Operation vorgenommen werden. Zusätzliche Informationen stellen die Abschnitte <em>Gruppen des ausgewählten Typs</em> und <em>Dateien</em> bereit.</p>
<div class="figure">
<img src="img/operate_overview.png" alt="Übersicht: Ausleihen &amp; Zurückgeben"  />
<p class="caption">
(#fig:operate-overview)Übersicht: Ausleihen &amp; Zurückgeben
</p>
</div>
<div id="ausleihen-zurückgeben" class="section level3" number="5.4.1">
<h3 number="5.4.1"><span class="header-section-number">5.4.1</span> Ausleihen &amp; Zurückgeben</h3>
<p>Zunächst muss ein Typ ausgewählt werden. Wenn die Web-Applikation über einen QR-Code aufgerufen wurde (siehe <a href="#qrcode">QR-Code</a>), ist der zum QR-Code gehörende Typ bereits ausgewählt. Im nächsten Schritt muss ein zugehöriger Untertyp ausgewählt werden. Die konkrete Operation kann durch Klicken auf einen der verfügbaren Buttons angestoßen werden. Im sich darauf öffnenden Dialog muss die Menge angegeben und die Ausführung der Operation bestätigt werden. Abbildung @ref(fig:operate-detail-circulate) gibt einen Überblick über den Abschnitt.</p>
<p><span class="badge admin">A</span> Administratoren können zusätzlich den ausführenden Nutzer auswählen, um Operationen für diesen durchzuführen. Das ist zum Beispiel notwendig, wenn ein Student das Fachgebiet verlassen hat und es versäumt hat, alle ausgeliehenen Sensoren zurückzugeben.</p>
<div class="flex">
<span>
<button class="btn btn-default action-button borrow-btn" id="" style="width: 100px; margin-right: 10px;" type="button">
<i class="fa fa-sign-out-alt" role="presentation" aria-label="sign-out-alt icon"></i>
Ausleihen
</button>
</span>
<p>Es können bis zur maximal verfügbaren Menge Elemente ausgeliehen werden.</p>
</div>
<div class="flex">
<span>
<button class="btn btn-default action-button return-btn" id="" style="width: 100px; margin-right: 10px;" type="button">
<i class="fa fa-sign-in-alt" role="presentation" aria-label="sign-in-alt icon"></i>
Zurückgeben
</button>
</span>
<p>Es können bis zur maximal ausgeliehenen Menge Elemente zurückgegeben werden.</p>
</div>
<div class="flex">
<span>
<button class="btn btn-default action-button write-off-btn" id="" style="width: 100px; margin-right: 10px;" type="button">
<i class="fa fa-balance-scale-right" role="presentation" aria-label="balance-scale-right icon"></i>
Abschreiben
</button>
</span>
<p><span class="badge admin">A</span> Es können bis zur maximal im Lager verfügbaren Menge Elemente abgeschrieben werden. Dies ist zum Beispiel notwendig, wenn ein Element ausfällt oder verloren geht.</p>
</div>
<div class="figure">
<img src="img/operate_detail_circulate.png" alt="Abschnitt: Ausleihen &amp; Zurückgeben"  />
<p class="caption">
(#fig:operate-detail-circulate)Abschnitt: Ausleihen &amp; Zurückgeben
</p>
</div>
</div>
<div id="gruppen-des-ausgewählten-typs" class="section level3" number="5.4.2">
<h3 number="5.4.2"><span class="header-section-number">5.4.2</span> Gruppen des ausgewählten Typs</h3>
<p>Alle Gruppen des ausgewählten Typs werden aufgelistet. Durch Klicken auf eine Gruppe öffnet sich ein Dialog, in dem alle Typen dieser Gruppe angezeigt werden, vergleiche Abbildung @ref(fig:operate-detail-groups). Durch Klicken auf einen Typen wird dieser Typ für eine weitere Operation ausgewählt. Somit können alle Elemente einer Gruppe (zum Beispiel ein Versuchsaufbau) komfortabel hintereinander ausgeliehen / zurückgegeben werden.</p>
<div class="figure">
<img src="img/operate_detail_groups.png" alt="Abschnitt: Gruppen des ausgewählten Typs"  />
<p class="caption">
(#fig:operate-detail-groups)Abschnitt: Gruppen des ausgewählten Typs
</p>
</div>
</div>
<div id="dateien" class="section level3" number="5.4.3">
<h3 number="5.4.3"><span class="header-section-number">5.4.3</span> Dateien</h3>
<p>Hier werden alle dem ausgewählten Typ zugeordneten Dateien angezeigt. Dabei ist die Anzeige - wie Abbildung @ref(fig:operate-detail-files) entnommen werden kann - in drei Reiter gegliedert:</p>
<ul>
<li><em>Gruppen</em>: Alle Dateien, die Informationen zu Gruppen des ausgewählten Typs enthalten</li>
<li><em>Typ</em>: Alle Dateien, die Informationen zum ausgewählten Typ enthalten</li>
<li><em>Untertypen</em>: Alle Dateien, die Informationen zu Untertypen des ausgewählten Typs enthalten. Es ist zu beachten, dass die Wahl des Untertypen keinen Einfluss auf die angezeigten Dateien hat, da Dateien für alle Untertypen dargestellt werden.</li>
</ul>
<p>Die Ziffer neben dem Reitertitel gibt Auskunft darüber, wie viele Dateien in der jeweiligen Kategorie vorhanden sind. Indem auf einen Dateinamen geklickt wird, öffnet sich das zugehörige PDF in einem separaten Browserfenster oder wird über den PDF-Viewer angezeigt. Alle Dateien einer Kategorie können in einem Archiv (<em>.zip</em>) heruntergeladen werden.</p>
<div class="figure">
<img src="img/operate_detail_files.png" alt="Abschnitt: Dateien"  />
<p class="caption">
(#fig:operate-detail-files)Abschnitt: Dateien
</p>
</div>
</div>
</div>
<div id="reporting" class="section level2" number="5.5">
<h2 number="5.5"><span class="header-section-number">5.5</span> Bestandsinformation</h2>
<p>Die Bestandsinformation gliedert sich in zwei Abschnitte, vergleiche Abbildung @ref(fig:reporting-overview). In der Bestandsübersicht werden Informationen zum Lagerbestand von Sensoren dargestellt, wohingegen die Ausleihübersicht Informationen über ausgeliehene Sensoren enthält.</p>
<div class="figure">
<img src="img/reporting_overview.png" alt="Übersicht: Bestandsinformation"  />
<p class="caption">
(#fig:reporting-overview)Übersicht: Bestandsinformation
</p>
</div>
<div id="bestandsübersicht" class="section level3" number="5.5.1">
<h3 number="5.5.1"><span class="header-section-number">5.5.1</span> Bestandsübersicht</h3>
<p>Zunächst muss ein Typ ausgewählt werden. Für diesen Typen werden tabellarisch alle Untertypen dieses Typs aufgelistet. Die Spalte <em>Verfügbar</em> enthält die gelagerte Menge, wohingegen die Spalte <em>Maximal verfügbar</em> die maximal gelagerte Menge (kein Sensor dieses Untertypen ausgeliehen) enthält. Über die Checkbox <em>Nur kritische Bestände anzeigen</em> kann ausgewählt werden, ob nur Untertypen angezeigt werden sollen, für die die verfügbare Menge kleiner als ihr kritischer Bestand ist. Der kritische Bestand eines Untertypen kann von einem <span class="badge admin">Administrator</span> im Reiter <a href="#type">Sensortypen</a> festgelegt werden.</p>
</div>
<div id="ausleihübersicht" class="section level3" number="5.5.2">
<h3 number="5.5.2"><span class="header-section-number">5.5.2</span> Ausleihübersicht</h3>
<p>Die Ausleihübersicht besteht aus vier Reitern, die unterschiedliche Fragestellen in Bezug auf ausgeliehene Sensoren beantworten, vergleiche Tabelle @ref(tab:reporting-details) und Abbildung @ref(fig:reporting-details).</p>
<table>
<caption>(#tab:reporting-details) Übersicht über die Ausleihübersicht</caption>
<colgroup>
<col width="33%" />
<col width="66%" />
</colgroup>
<thead>
<tr class="header">
<th>Reiter</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Gesamt</td>
<td>Übersicht über alle Untertypen mit einer gegenwärtig ausgeliehenen Menge größer Null.</td>
</tr>
<tr class="even">
<td>Nach Untertyp</td>
<td>Übersicht über alle Nutzer, die den gewählten Untertypen zurzeit ausgeliehen haben. Hiermit kann herausgefunden werden, wer Ansprechpartner ist, falls alle Elemente eines Untertyps ausgeliehen sind.</td>
</tr>
<tr class="odd">
<td>Nach Nutzer</td>
<td>Übersicht über alle Untertypen, die der gewählte Nutzer zurzeit ausgeliehen hat.</td>
</tr>
<tr class="even">
<td>Transaktionen</td>
<td>Übersicht über alle Transaktionen, die jemals im Rahmen der Sensorverwaltung stattgefunden haben. Ein Nutzer sieht ausschließlich seine eigenen Transaktionen. Ein <span class="badge admin">Administrator</span> sieht alle Transaktionen. Dazu gehören neben Ausleih- und Rückgabeoperationen auch Abschreibungen und sonstige Mengenänderungen.</td>
</tr>
</tbody>
</table>
<div class="figure">
<img src="img/reporting_details.png" alt="Übersicht: Ausleihübersicht"  />
<p class="caption">
(#fig:reporting-details)Übersicht: Ausleihübersicht
</p>
</div>
</div>
</div>
<div id="user-management" class="section level2" number="5.6">
<h2 number="5.6"><span class="header-section-number">5.6</span> Nutzerverwaltung <span class="badge admin">A</span> <span class="badge mod">M</span></h2>
<p>In der <em>Nutzerverwaltung</em> können neue Nutzer hinzugefügt und in der <em>Nutzertabelle</em> verwaltet werden, vergleiche Abbildung @ref(fig:user-management-overview).</p>
<div class="figure">
<img src="img/user_management_overview.png" alt="Übersicht: Nutzerverwaltung"  />
<p class="caption">
(#fig:user-management-overview)Übersicht: Nutzerverwaltung
</p>
</div>
<div id="nutzer-hinzufügen" class="section level3" number="5.6.1">
<h3 number="5.6.1"><span class="header-section-number">5.6.1</span> Nutzer hinzufügen</h3>
<p>Neue Nutzer können unter Angabe eines Benutzernamens und eines zur Sicherheit zweimal anzugebenden Passwortes hinzugefügt werden. Ein <span class="badge mod">Moderator</span> kann ausschließlich <span class="badge user">Benutzer</span> hinzufügen, wohingegen ein <span class="badge admin">Administrator</span> Benutzer mit jeder Rolle hinzufügen kann.</p>
</div>
<div id="nutzertabelle" class="section level3" number="5.6.2">
<h3 number="5.6.2"><span class="header-section-number">5.6.2</span> Nutzertabelle</h3>
<p>In der Nutzertabelle (vergleiche Tabelle @ref(tab:user-table)) können Nutzer verwaltet werden. Neben dem Benutzernamen und dem gegenwärtigen Status gibt es drei Spalten, die Buttons enthalten, mit denen Eigenschaften eines Nutzer angepasst werden können.</p>
<table>
<caption>(#tab:user-table) Nutzertabelle</caption>
<colgroup>
<col width="33%" />
<col width="66%" />
</colgroup>
<thead>
<tr class="header">
<th>Spalte</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Status ändern <span class="badge admin">A</span></td>
<td>Dieser Button öffnet einen Dialog, in dem ein neuer Status für den Nutzer ausgewählt werden kann.</td>
</tr>
<tr class="even">
<td>Entfernen</td>
<td>Dieser Button öffnet einen Dialog, in dem bestätigt werden muss, dass der ausgewählte Nutzer gelöscht werden soll. Es ist zu beachten, dass diese Operation nicht rückgängig gemacht werden kann. Transaktionen, die der ausgewählte Nutzer vorgenommen hat, bleiben jedoch weiterhin erhalten. Es können nur Nutzer gelöscht werden, die zurzeit keine Sensoren ausgeliehen haben. Falls der Nutzer nicht in der Lage ist, die Sensoren eigenständig zurückzugeben, kann der <span class="badge admin">Administrator</span> die ausgeliehenen Sensoren im Reiter <a href="#operate">Ausleihen &amp; Zurückgeben</a> für diesen Nutzer zurückgeben. Ein <span class="badge mod">Moderator</span> kann nur <span class="badge user">Benutzer</span> entfernen, die er selbst hinzugefügt hat.</td>
</tr>
<tr class="odd">
<td>Passwort zurücksetzen <span class="badge admin">A</span></td>
<td>Dieser Button öffnet einen Dialog, in dem bestätigt werden muss, dass das Passwort des Nutzers zurückgesetzt werden soll. Das Passwort wird auf das Standardpasswort <em>1234</em> zurückgesetzt und sollte vom Nutzer sofort danach im Reiter <a href="#settings">Einstellungen</a> geändert werden.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="group" class="section level2" number="5.7">
<h2 number="5.7"><span class="header-section-number">5.7</span> Gruppen <span class="badge admin">A</span></h2>
<p>Der Reiter <em>Gruppen</em> erlaubt es, neue Gruppen hinzuzufügen und bestehende Gruppen zu verwalten, vergleiche Abbildung @ref(fig:group-overview).</p>
<div class="figure">
<img src="img/group_overview.png" alt="Übersicht: Nutzerverwaltung"  />
<p class="caption">
(#fig:group-overview)Übersicht: Nutzerverwaltung
</p>
</div>
<div id="gruppe-hinzufügen" class="section level3" number="5.7.1">
<h3 number="5.7.1"><span class="header-section-number">5.7.1</span> Gruppe hinzufügen</h3>
<p>Eine neue Gruppe kann durch Angabe eines Gruppennamens hinzugefügt werden.</p>
</div>
<div id="gruppentabelle" class="section level3" number="5.7.2">
<h3 number="5.7.2"><span class="header-section-number">5.7.2</span> Gruppentabelle</h3>
<p>In der <em>Gruppentabelle</em> (vergleiche Tabelle @ref(tab:group-table)) können Gruppen bearbeitet werden.</p>
<table>
<caption>(#tab:group-table) Gruppentabelle</caption>
<colgroup>
<col width="33%" />
<col width="66%" />
</colgroup>
<thead>
<tr class="header">
<th>Spalte</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Gruppenname</td>
<td>Ein Klick auf einen Gruppennamen öffnet einen Dialog, in dem der Gruppenname angepasst werden kann.</td>
</tr>
<tr class="even">
<td>Typen bearbeiten</td>
<td>Dieser Button öffnet einen Dialog, in dem die zur ausgewählten Gruppe zugehörigen Typen bearbeitet werden können.</td>
</tr>
<tr class="odd">
<td>Entfernen</td>
<td>Dieser Button öffnet einen Dialog, in dem bestätigt werden muss, dass die ausgewählte Gruppe gelöscht werden soll. Es ist zu beachten, dass diese Operation nicht rückgängig gemacht werden kann.</td>
</tr>
</tbody>
</table>
</div>
<div id="typen-anzeigen" class="section level3" number="5.7.3">
<h3 number="5.7.3"><span class="header-section-number">5.7.3</span> Typen anzeigen</h3>
<p>Zunächst muss eine Gruppe ausgewählt werden. In der Tabelle werden alle zur ausgewählten Gruppe zugehörigen Typen dargestellt.</p>
</div>
</div>
<div id="type" class="section level2" number="5.8">
<h2 number="5.8"><span class="header-section-number">5.8</span> Sensortypen <span class="badge admin">A</span></h2>
<p>Der Reiter <em>Sensortypen</em> erlaubt es, neue Typen und Untertypen hinzuzufügen und bestehende Typen und Untertypen zu verwalten, vergleiche Abbildung @ref(fig:type-overview).</p>
<div class="figure">
<img src="img/type_overview.png" alt="Übersicht: Sensortypen"  />
<p class="caption">
(#fig:type-overview)Übersicht: Sensortypen
</p>
</div>
<div id="typ-hinzufügen" class="section level3" number="5.8.1">
<h3 number="5.8.1"><span class="header-section-number">5.8.1</span> Typ hinzufügen</h3>
<p>Ein neuer Typ kann durch Angabe eines Typnamens hinzugefügt werden.</p>
</div>
<div id="typtabelle" class="section level3" number="5.8.2">
<h3 number="5.8.2"><span class="header-section-number">5.8.2</span> Typtabelle</h3>
<p>In der <em>Typtabelle</em> (vergleiche Tabelle @ref(tab:type-table)) können Typen bearbeitet werden.</p>
<table>
<caption>(#tab:type-table) Typtabelle</caption>
<colgroup>
<col width="33%" />
<col width="66%" />
</colgroup>
<thead>
<tr class="header">
<th>Spalte</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Typname</td>
<td>Ein Klick auf einen Typnamen öffnet einen Dialog, in dem der Typname angepasst werden kann.</td>
</tr>
<tr class="even">
<td>Gruppen bearbeiten</td>
<td>Dieser Button öffnet einen Dialog, in dem die zum ausgewählten Typ zugehörigen Gruppen bearbeitet werden können.</td>
</tr>
<tr class="odd">
<td>Entfernen</td>
<td>Dieser Button öffnet einen Dialog, in dem bestätigt werden muss, dass der ausgewählte Typ gelöscht werden soll. Es ist zu beachten, dass diese Operation nicht rückgängig gemacht werden kann. Ein Typ kann nur gelöscht werden, wenn kein Element seiner Untertypen ausgeliehen ist. Transaktionen, die den ausgewählten Typen betreffen, bleiben weiterhin erhalten. Das Entfernen eines Typen schließt das Entfernen aller Untertypen dieses Typen ein.</td>
</tr>
</tbody>
</table>
</div>
<div id="gruppen-anzeigen" class="section level3" number="5.8.3">
<h3 number="5.8.3"><span class="header-section-number">5.8.3</span> Gruppen anzeigen</h3>
<p>Zunächst muss ein Typ ausgewählt werden. In der Tabelle werden alle zum ausgewählten Typen zugehörigen Gruppen dargestellt.</p>
</div>
<div id="untertypen-bearbeiten" class="section level3" number="5.8.4">
<h3 number="5.8.4"><span class="header-section-number">5.8.4</span> Untertypen bearbeiten</h3>
<p>Zunächst muss ein Typ ausgewählt werden. In der <em>Untertypentabelle</em> (vergleiche Tabelle @ref(tab:subtype-table)) können Untertypen des ausgewählten Typen bearbeitet werden.</p>
<table>
<caption>(#tab:subtype-table) Untertypentabelle</caption>
<colgroup>
<col width="33%" />
<col width="66%" />
</colgroup>
<thead>
<tr class="header">
<th>Spalte</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Untertypname</td>
<td>Ein Klick auf einen Untertypnamen öffnet einen Dialog, in dem der Untertypname angepasst werden kann.</td>
</tr>
<tr class="even">
<td>Menge</td>
<td>Ein Klick auf die maximal verfügbare Menge öffnet einen Dialog, in dem die maximal verfügbare Menge des Untertypen angepasst werden kann. Es ist zu beachten, dass die maximal verfügbare Menge nicht auf einen Wert gesetzt werden kann, der kleiner der Anzahl gegenwärtig ausgeliehener Elemente ist.</td>
</tr>
<tr class="odd">
<td>Kritischer Bestand</td>
<td>Ein Klick auf den kritischen Bestand öffnet einen Dialog, in dem der kritische Bestand des Untertypen angepasst werden kann. Der kritische Bestand kann als Filterkriterium in der <em>Ausleihübersicht</em> des Reiters <a href="#reporting">Bestandsinformation</a> verwendet werden.</td>
</tr>
<tr class="even">
<td>Entfernen</td>
<td>Dieser Button öffnet einen Dialog, in dem bestätigt werden muss, dass der ausgewählte Untertyp gelöscht werden soll. Es ist zu beachten, dass diese Operation nicht rückgängig gemacht werden kann. Ein Untertyp kann nur gelöscht werden, wenn keine Elemente von diesem ausgeliehen sind. Transaktionen, die den ausgewählten Untertypen betreffen, bleiben weiterhin erhalten.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="file-management" class="section level2" number="5.9">
<h2 number="5.9"><span class="header-section-number">5.9</span> Dateiverwaltung <span class="badge admin">A</span></h2>
<p>In der <em>Dateiverwaltung</em> können PDF-Dateien als Informationsmaterial in den Reitern <em>Gruppen</em>, <em>Typen</em> und <em>Untertypen</em> hochgeladen werden. Die Reiter unterscheiden sich ausschließlich in der Auswahl des zu beschreibenden Objektes. Durch Klick auf <em>Datei hochladen</em> kann eine PDF-Datei auf dem lokalen Dateisystem ausgewählt werden. Hochgeladene Dateien werden in einer Tabelle (vergleiche Tabelle @ref(tab:file-table)) angezeigt.</p>
<table>
<caption>(#tab:file-table) Dateitabelle</caption>
<colgroup>
<col width="33%" />
<col width="66%" />
</colgroup>
<thead>
<tr class="header">
<th>Spalte</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Datei</td>
<td>Ein Klick auf einen Dateinamen öffnet einen Dialog, in dem der Dateiname angepasst werden kann.</td>
</tr>
<tr class="even">
<td>Herunterladen</td>
<td>Dieser Button lädt die Datei herunter.</td>
</tr>
<tr class="odd">
<td>Löschen</td>
<td>Dieser Button öffnet einen Dialog, in dem bestätigt werden muss, dass die ausgewählte Datei gelöscht werden soll. Es ist zu beachten, dass diese Operation nicht rückgängig gemacht werden kann.</td>
</tr>
</tbody>
</table>
</div>
<div id="qrcode" class="section level2" number="5.10">
<h2 number="5.10"><span class="header-section-number">5.10</span> QR-Code <span class="badge admin">A</span></h2>
<p>Zur beschleunigten Ausleihe und Rückgabe kann ein QR-Code für Typen erstellt werden, vergleiche Abbildung @ref(fig:qr-code-overview). Dazu muss zunächst der Typ und die Serverdomäne ausgewählt werden. Der erstellte QR-Code und der Link, auf den der QR-Code verweist, werden eingeblendet. Der QR-Code kann im Anschluss als PDF-, PNG- oder SVG-Datei heruntergeladen werden. Dazu kann zusätzlich die Breite und Höhe der zu erstellenden Datei in Millimeter angegeben werden.</p>
<p>Der ausgedruckte QR-Code kann im Lager platziert werden. Dort muss er zum Beispiel mit einem auf einem mobilen Endgerät installierten, handelsüblichen QR-Code-Reader eingescannt werden, wodurch die Web-Applikation geöffnet wird. <span class="badge user">Benutzer</span> und <span class="badge mod">Moderator</span> werden - falls bereits angemeldet, siehe <a href="#cookies">Cookies</a> - sofort, ansonsten nachdem sie sich angemeldet haben, auf den Reiter <a href="#operate">Ausleihen &amp; Zurückgeben</a> weitergeleitet, wo der eingescannte Typ bereits vorausgewählt ist. Sie müssen dann nur noch den Untertyp auswählen.</p>
<div class="figure">
<img src="img/qr_code_overview.png" alt="Übersicht: QR-Code"  />
<p class="caption">
(#fig:qr-code-overview)Übersicht: QR-Code
</p>
</div>
</div>
<div id="settings" class="section level2" number="5.11">
<h2 number="5.11"><span class="header-section-number">5.11</span> Einstellungen</h2>
<p>In den Einstellungen können der Benutzername und das Passwort geändert werden, vergleiche Abbildung @ref(fig:settings-overview).</p>
<div class="figure">
<img src="img/settings_overview.png" alt="Übersicht: Einstellungen"  />
<p class="caption">
(#fig:settings-overview)Übersicht: Einstellungen
</p>
</div>
<div id="benutzernamen-ändern" class="section level3" number="5.11.1">
<h3 number="5.11.1"><span class="header-section-number">5.11.1</span> Benutzernamen ändern</h3>
<p>Um den eigenen Benutzernamen zu ändern, muss ein neuer Benutzername eingeben werden. Nach Eingabe des Passworts und Bestätigen wird der Benutzername geändert.</p>
</div>
<div id="passwort-ändern" class="section level3" number="5.11.2">
<h3 number="5.11.2"><span class="header-section-number">5.11.2</span> Passwort ändern</h3>
<p>Um das eigene Passwort zu ändern, muss ein neues Passwort zweimal eingegeben und bestätigt werden.</p>
<!--chapter:end:05-user-guide.Rmd-->
</div>
</div>
</div>
<div id="technical-guide" class="section level1" number="6">
<h1 number="6"><span class="header-section-number">6</span> Technische Umsetzung</h1>
<p>Die nachfolgenden Abschnitte erweitern die Nutzerhilfe um die Beschreibung der technischen Umsetzung ausgewählter Elemente der Web-Applikation. Die ausgewählten Elemente sollen dabei insbesondere eine Vielzahl des verwendeteten Methodenspektrums darlegen, sodass eine nachhaltige Nutzung über die Laufzeit des Projektes hinaus erleichtert wird. Darüber hinaus sollen interessante Ansätze vorgestellt werden.</p>
<div id="struktur-der-web-applikation" class="section level2" number="6.1">
<h2 number="6.1"><span class="header-section-number">6.1</span> Struktur der Web-Applikation</h2>
<p>Strukturell handelt es sich bei der Web-Applikation um eine Sammlung verschiedener Dateien innerhalb eines Ordners. Der Einstiegspunkt in die Web-Applikation ist die Datei <code>app.R</code>. Alle anderen Dateien werden zur Laufzeit der Web-Applikation eingebunden. Die Web-Applikation wird gestartet, indem der Shiny Server die Datei <em>app.R</em> ausführt. In <code>app.R</code> werden Initialisierungen durchgeführt und die Funktionen <code>ui</code> und <code>server</code> definiert. Die Datei endet mit dem Aufruf <code>shinyApp(ui, server)</code>, wobei die <code>ui</code>-Funktion das visuelle Layout der Web-Applikation beschreibt und die <code>server</code>-Funktion Eingaben verarbeitet. Mithilfe von sogenannten Modulen kann der Code strukturiert werden. Jedes Modul setzt sich dabei wiederum aus einer <code>ui</code>- und einer <code>server</code>-Funktion zusammen. Module bilden Teilaspekte, die unter Umständen wiederverwendet werden können, ab.</p>
<div id="struktur-von-app.r" class="section level3" number="6.1.1">
<h3 number="6.1.1"><span class="header-section-number">6.1.1</span> Struktur von <code>app.R</code></h3>
<p>Wie bereits beschrieben, ist die Datei <code>app.R</code> der Einstiegspunkt der Web-Applikation. Da sie Einfluss auf das Verhalten vieler weiterer Module hat, ist ihr Aufbau näher zu betrachten. Zur Übersicht werden die Inhalte verkürzt dargestellt.</p>
<ul>
<li>Laden benötigter Packages mit <code>library()</code>. Die Mehrzahl aller Packages wird über den <code>::</code>-Operator referenziert. Nur die Packages, die zwangsläufig mit <code>library()</code> geladen werden müssen, also Packages, die funktionsrelevanten Code mit dem Aufruf von <code>library()</code> verbinden, werden hier geladen.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinyjs)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(qrcode)</span></code></pre></div>
<ul>
<li>Die Funktion <code>source_directory()</code> wird manuell gesourcet und danach dazu verwendet, alle <code>.R</code>-Dateien in den Ordnern <code>modules</code> und <code>db/func</code> zu sourcen.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;init/source_directory.R&quot;</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">source_directory</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">path =</span> <span class="st">&quot;modules&quot;</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">modifiedOnly =</span> <span class="cn">FALSE</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">chdir =</span> <span class="cn">TRUE</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">recursive =</span> <span class="cn">TRUE</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">envir =</span> <span class="cf">if</span> (source_to_globalenv) <span class="fu">globalenv</span>() <span class="cf">else</span> <span class="fu">environment</span>()</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<ul>
<li>Die <code>ui</code>-Funktion bindet alle CSS- und JavaScript-Dateien ein und aktiviert spezielle Packages. Die Funktion <code>container_ui()</code>, die das Layout des Dashboardes festlegt, wird aufgerufen. In <code>container_ui()</code> wird für jeden Reiter eine eigene <code>ui</code>-Funktion aufgerufen.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>    <span class="co"># UI -----------------------------------------------------------------------</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    ui <span class="ot">&lt;-</span> htmltools<span class="sc">::</span><span class="fu">tagList</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        htmltools<span class="sc">::</span><span class="fu">includeScript</span>(<span class="st">&quot;www/js/dark-mode.js&quot;</span>),</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        htmltools<span class="sc">::</span><span class="fu">includeCSS</span>(<span class="st">&quot;www/css/styles.css&quot;</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">container_ui</span>(</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">id =</span> <span class="st">&quot;container&quot;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        rclipboard<span class="sc">::</span><span class="fu">rclipboardSetup</span>(),</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        shinyjs<span class="sc">::</span><span class="fu">useShinyjs</span>(),</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>        waiter<span class="sc">::</span><span class="fu">use_waiter</span>()</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<ul>
<li>In der <code>server</code>-Funktion wird die <code>.values</code>-<a href="https://adv-r.hadley.nz/environments.html">Environment</a> angelegt. Diese enthält die in Tabelle @ref(tab:values-environment) aufgelisteten Elemente.</li>
</ul>
<table>
<caption>(#tab:values-environment) Die <code>.values</code>-Environment</caption>
<colgroup>
<col width="33%" />
<col width="66%" />
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>query$type</code></td>
<td>Aus Query-String ausgelesene Typ-ID</td>
</tr>
<tr class="even">
<td><code>settings</code></td>
<td>Liste, die Namenslängen festlegt und Dictionaries enthält</td>
</tr>
<tr class="odd">
<td><code>update</code></td>
<td>Liste, die <code>reactiveVal()</code>s enthält, die bei Datenaktualisierung getriggert werden</td>
</tr>
<tr class="even">
<td><code>user</code></td>
<td>Liste, die Informationen zum angemeldeten Nutzer enthält</td>
</tr>
<tr class="odd">
<td><code>yaml</code></td>
<td>Inhalt von <code>app.yml</code></td>
</tr>
</tbody>
</table>
<p>Diese Environment wird jeder <code>server</code>-Funktion übergeben, sodass die Werte in jeder <code>server</code>-Funktion verfügbar sind.</p>
<ul>
<li>In der <code>server</code>-Funktion von <code>app.R</code> wird die <code>server</code>-Funktion <code>container_server()</code> aufgerufen.</li>
</ul>
</div>
<div id="ordnerstruktur" class="section level3" number="6.1.2">
<h3 number="6.1.2"><span class="header-section-number">6.1.2</span> Ordnerstruktur</h3>
<ul>
<li><code>.gitignore</code> Index aller Dateien, die nicht der Versionskontrolle unterliegen</li>
<li><code>app.R</code> Einstiegspunkt in die Web-Applikation</li>
<li><code>app.yml</code> Konfigurationsdatei</li>
<li><code>db</code>
<ul>
<li><code>db.sqlite</code> Datenbank</li>
<li><code>func</code> Funktionssammlung zur Interaktion mit der Datenbank</li>
</ul></li>
<li><code>files</code> Dateiensammlung für <a href="#file-management">Dateiverwaltung</a>. Enthält drei Unterordner für Gruppen, Typen und Untertypen. Jeder dieser Unterordner enthält für jedes Element der jeweiligen Kategorie einen Ordner mit der Identifikationsnummer des jeweiligen Elementes als Namen</li>
<li><code>init/source_directory.R</code> Hilfsfunktion, die beim Start der Web-Applikation alle <code>.R</code>-Dateien einliest</li>
<li><code>modules</code> Shiny-Module und sonstige Funktionalität
<ul>
<li><code>container.R</code> Definition des Dashboards</li>
<li><code>dt_options.R</code> Optionen für <code>DT::datatable</code></li>
<li><code>object</code> Generalisierte Module für Gruppen, Typen und Untertypen (z.B. Element hinzufügen, umbenennen etc.)</li>
<li><code>sidebar_menu.R</code> Definition der Sidebar</li>
<li><code>tab_file_management</code> <a href="#file-management">Dateiverwaltung</a></li>
<li><code>tab_group</code> <a href="#groups">Gruppen</a></li>
<li><code>tab_login</code> <a href="#login">Anmeldung</a></li>
<li><code>tab_operate</code> <a href="#operate">Ausleihen &amp; Zurückgeben</a></li>
<li><code>tab_qrcode</code> <a href="#qrcode">QR-Code</a></li>
<li><code>tab_reporting</code> <a href="#reporting">Bestandsinformation</a></li>
<li><code>tab_settings</code> <a href="#settings">Einstellungen</a></li>
<li><code>tab_type</code> <a href="#type">Typen</a></li>
<li><code>tab_user_management</code> <a href="#user-management">Nutzerverwaltung</a></li>
<li><code>utils.R</code> Hilfsfunktionen</li>
</ul></li>
<li><code>renv</code>, <code>renv.lock</code> Package-Management</li>
<li><code>www</code>
<ul>
<li><code>css</code> CSS-Dateien</li>
<li><code>favicon.ico</code> Sensotheka-Icon</li>
<li><code>js</code> JavaScript-Dateien</li>
</ul></li>
</ul>
</div>
</div>
<div id="database" class="section level2" number="6.2">
<h2 number="6.2"><span class="header-section-number">6.2</span> Datenbank</h2>
<p>Die Datenbank ist eine SQLite-Datenbank. Sie liegt in <code>db/db.sqlite</code>. Der Zugriff erfolgt über das Package {DBI}.</p>
<div id="struktur" class="section level3" number="6.2.1">
<h3 number="6.2.1"><span class="header-section-number">6.2.1</span> Struktur</h3>
<p>Alle Tabellen enthalten die Spalte <code>rowid</code>, die den Primärschlüssel der jeweiligen Tabelle enthält. Diese kann somit zur eindeutigen Identifikation einer Zeile verwendet werden. Die Beschränkung <span class="badge unique">Einzigartig</span> bezieht sich immer nur auf die nicht gelöschten Elemente (<code>removed = 0</code>).</p>
<div id="circulation" class="section level4" number="6.2.1.1">
<h4 number="6.2.1.1"><span class="header-section-number">6.2.1.1</span> circulation</h4>
<table>
<caption>(#tab:circulation) Datenbank: Tabelle <code>circulation</code></caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="48%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Spalte</th>
<th align="left">Einschränkungen</th>
<th align="left">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">user_id</td>
<td align="left"><span class="badge fk">Fremdschlüssel</span></td>
<td align="left">Identifikationsnummer des ausführenden Nutzers</td>
</tr>
<tr class="even">
<td align="left">subtype_id</td>
<td align="left"><span class="badge fk">Fremdschlüssel</span></td>
<td align="left">Identifikationsnummer des bearbeiteten Untertyps</td>
</tr>
<tr class="odd">
<td align="left">quantity</td>
<td align="left"><span class="badge nn">Nicht-negativ</span></td>
<td align="left">Bearbeitete Menge</td>
</tr>
<tr class="even">
<td align="left">time</td>
<td align="left"></td>
<td align="left">Zeitpunkt der Transaktion</td>
</tr>
<tr class="odd">
<td align="left">op_type</td>
<td align="left"><code>1</code> oder <code>2</code></td>
<td align="left">Transaktionsart: <code>1</code> - Ausleihen und Zurückgeben, <code>2</code> - Bestandsänderungen</td>
</tr>
</tbody>
</table>
</div>
<div id="groups" class="section level4" number="6.2.1.2">
<h4 number="6.2.1.2"><span class="header-section-number">6.2.1.2</span> groups</h4>
<table>
<caption>(#tab:groups) Datenbank: Tabelle <code>groups</code></caption>
<thead>
<tr class="header">
<th align="left">Spalte</th>
<th align="left">Einschränkungen</th>
<th align="left">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">group_name</td>
<td align="left"><span class="badge unique">Einzigartig</span></td>
<td align="left">Gruppenname</td>
</tr>
<tr class="even">
<td align="left">removed</td>
<td align="left"><code>0</code> oder <code>1</code></td>
<td align="left"><code>0</code> - existent, <code>1</code> - gelöscht</td>
</tr>
</tbody>
</table>
</div>
<div id="group_type" class="section level4" number="6.2.1.3">
<h4 number="6.2.1.3"><span class="header-section-number">6.2.1.3</span> group_type</h4>
<table>
<caption>(#tab:group-type) Datenbank: Tabelle <code>group_type</code></caption>
<thead>
<tr class="header">
<th align="left">Spalte</th>
<th align="left">Einschränkungen</th>
<th align="left">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">group_id</td>
<td align="left"><span class="badge fk">Fremdschlüssel</span></td>
<td align="left">Identifikationsnummer der Gruppe</td>
</tr>
<tr class="even">
<td align="left">type_id</td>
<td align="left"><span class="badge fk">Fremdschlüssel</span></td>
<td align="left">Identifikationsnummer des Typs</td>
</tr>
</tbody>
</table>
</div>
<div id="subtype" class="section level4" number="6.2.1.4">
<h4 number="6.2.1.4"><span class="header-section-number">6.2.1.4</span> subtype</h4>
<table>
<caption>(#tab:subtype) Datenbank: Tabelle <code>subtype</code></caption>
<thead>
<tr class="header">
<th align="left">Spalte</th>
<th align="left">Einschränkungen</th>
<th align="left">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">type_id</td>
<td align="left"><span class="badge fk">Fremdschlüssel</span></td>
<td align="left">Identifikationsnummer des Typs</td>
</tr>
<tr class="even">
<td align="left">subtype_name</td>
<td align="left"><span class="badge unique">Einzigartig</span> innerhalb eines Typs</td>
<td align="left">Untertypenname</td>
</tr>
<tr class="odd">
<td align="left">quantity</td>
<td align="left"><span class="badge nn">Nicht-negativ</span></td>
<td align="left">Bestandsmenge</td>
</tr>
<tr class="even">
<td align="left">removed</td>
<td align="left"><code>0</code> oder <code>1</code></td>
<td align="left"><code>0</code> - existent, <code>1</code> - gelöscht</td>
</tr>
</tbody>
</table>
</div>
<div id="type-1" class="section level4" number="6.2.1.5">
<h4 number="6.2.1.5"><span class="header-section-number">6.2.1.5</span> type</h4>
<table>
<caption>(#tab:type) Datenbank: Tabelle <code>type</code></caption>
<thead>
<tr class="header">
<th align="left">Spalte</th>
<th align="left">Einschränkungen</th>
<th align="left">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">type_name</td>
<td align="left"><span class="badge unique">Einzigartig</span></td>
<td align="left">Typname</td>
</tr>
<tr class="even">
<td align="left">removed</td>
<td align="left"><code>0</code> oder <code>1</code></td>
<td align="left"><code>0</code> - existent, <code>1</code> - gelöscht</td>
</tr>
</tbody>
</table>
</div>
<div id="user" class="section level4" number="6.2.1.6">
<h4 number="6.2.1.6"><span class="header-section-number">6.2.1.6</span> user</h4>
<table>
<caption>(#tab:user) Datenbank: Tabelle <code>user</code></caption>
<thead>
<tr class="header">
<th align="left">Spalte</th>
<th align="left">Einschränkungen</th>
<th align="left">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">hash</td>
<td align="left"></td>
<td align="left">Verhashter Nutzername (notwendig für Cookies)</td>
</tr>
<tr class="even">
<td align="left">name</td>
<td align="left"><span class="badge unique">Einzigartig</span></td>
<td align="left">Nutzername</td>
</tr>
<tr class="odd">
<td align="left">status</td>
<td align="left"><code>admin</code>, <code>mod</code> oder <code>user</code></td>
<td align="left">Nutzerrolle</td>
</tr>
<tr class="even">
<td align="left">password</td>
<td align="left"></td>
<td align="left">Verhashtes Passwort</td>
</tr>
<tr class="odd">
<td align="left">added_from</td>
<td align="left"></td>
<td align="left">Nutzeridentifikationsnummer des Hinzufügenden</td>
</tr>
<tr class="even">
<td align="left">time_added</td>
<td align="left"></td>
<td align="left">Zeitpunkt der Kontoeröffnung</td>
</tr>
<tr class="odd">
<td align="left">time_current_logged</td>
<td align="left"></td>
<td align="left">Zeitpunkt der letzten Anmeldung</td>
</tr>
<tr class="even">
<td align="left">time_previous_logged</td>
<td align="left"></td>
<td align="left">Zeitpunkt der vorletzten Anmeldung</td>
</tr>
<tr class="odd">
<td align="left">times_logged</td>
<td align="left"></td>
<td align="left">Anzahl der Anmeldungen</td>
</tr>
<tr class="even">
<td align="left">removed</td>
<td align="left"><code>0</code> oder <code>1</code></td>
<td align="left"><code>0</code> - existent, <code>1</code> - gelöscht</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="zugriff" class="section level3" number="6.2.2">
<h3 number="6.2.2"><span class="header-section-number">6.2.2</span> Zugriff</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span></code></pre></div>
<pre><code>## Warning: package &#39;DBI&#39; was built under R version 4.0.3</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RSQLite)</span></code></pre></div>
<pre><code>## Warning: package &#39;RSQLite&#39; was built under R version 4.0.4</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verbinde die Datenbank mit R</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>db <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(<span class="fu">SQLite</span>(), <span class="st">&quot;db/db.sqlite&quot;</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabellennamen</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListTables</span>(db)</span></code></pre></div>
<pre><code>## [1] &quot;circulation&quot; &quot;group_type&quot;  &quot;groups&quot;      &quot;subtype&quot;     &quot;type&quot;        &quot;user&quot;</code></pre>
<p>Beispielhaft wird die Tabelle “circulation” betrachtet. Diese Tabelle speichert alle Transaktionen, die von Nutzern durchgeführt worden sind, also zum Beispiel Ausleihen, Rückgaben und Mengenänderungen.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbReadTable</span>(db, <span class="st">&quot;circulation&quot;</span>)</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
(#tab:unnamed-chunk-9)Beispielhafter Inhalt der Tabelle <code>circulation</code>
</caption>
<thead>
<tr>
<th style="text-align:right;">
user_id
</th>
<th style="text-align:right;">
subtype_id
</th>
<th style="text-align:right;">
quantity
</th>
<th style="text-align:left;">
time
</th>
<th style="text-align:right;">
op_type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:left;width: 5cm; ">
2021-02-18 18:38:00
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;width: 5cm; ">
2021-02-18 18:38:04
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;width: 5cm; ">
2021-02-18 18:38:07
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;width: 5cm; ">
2021-02-18 18:38:12
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;width: 5cm; ">
2021-02-18 18:38:16
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;width: 5cm; ">
2021-02-18 18:40:14
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;width: 5cm; ">
2021-02-18 18:41:09
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
112
</td>
<td style="text-align:left;width: 5cm; ">
2021-02-18 18:41:40
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:left;width: 5cm; ">
2021-02-18 19:38:35
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;width: 5cm; ">
2021-02-18 19:40:53
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
<p>Der Ordner <code>db/func</code> enthält eine Sammlung von über 80 Hilfsfunktionen, die zum Erstellen, Abfragen und Modifizieren der Datenbank verwendet werden. Die Interaktion mit der Datenbank erfolgt ausschließlich über diese Hilfsfunktionen. Dadurch werden Redundanzen ausgeschlossen und es ist darüber hinaus einfacher, die korrekte Funktionalität zu gewährleisten.</p>
<p>Beispielhaft wird die Funktion <code>db_get_borrowed_quantity(db, subtype_id)</code> betrachtet. Unter Angabe der Datenbank <code>db</code> und einer oder mehrerer Untertypenidentifikationsnummern <code>subtype_id</code> wird die ausgeliehene Menge dieser Untertypen zurückgegeben. In {DBI} werden Abfragen an die Datenbank mithilfe von <code>dbGetQuery()</code> gestellt. Das Resultat der Abfrage wird anschließend weiterverarbeitet. Der Nutzen der Hilfsfunktion wird zusätzlich dadurch verdeutlicht, dass sowohl die abzufragende Tabelle sowie die beteiligten Zeilen und Spalten nicht gesondert angegeben werden müssen.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Funktionsdefinition</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>db_get_borrowed_quantity <span class="ot">&lt;-</span> <span class="cf">function</span>(db, subtype_id) {</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  borrowed <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbGetQuery</span>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    db,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;SELECT SUM(quantity) AS borrowed FROM circulation</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="st">    WHERE subtype_id = ? AND op_type = 1&quot;</span>,</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">params =</span> <span class="fu">list</span>(subtype_id)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">$</span>borrowed</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">is.na</span>(borrowed), <span class="dv">0</span>, borrowed)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Abfrage der ausgeliehenen Menge für mehrere Untertypen</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="fu">db_get_borrowed_quantity</span>(db, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1]  0 13  0  0  2</code></pre>
</div>
</div>
<div id="cookies" class="section level2" number="6.3">
<h2 number="6.3"><span class="header-section-number">6.3</span> Cookies</h2>
<p>Cookies sind Textdaten, die der Client mit jeder Anfrage an den Server mitsendet. Die Web-Applikation setzt zwei Cookies. Die Cookies sind jeweils für einen Zeitraum von sieben Tagen gültig.</p>
<div id="dark-mode" class="section level3" number="6.3.1">
<h3 number="6.3.1"><span class="header-section-number">6.3.1</span> dark-mode</h3>
<p>Dieses Cookie kann die Werte <code>"true"</code> oder <code>"false"</code> enthalten. Das Cookie wird gesetzt, wenn der Nutzer die Toggle für den Nachtmodus verwendet. Beim Start der Web-Applikation wird das Cookie verwendet, um den initialen Status für den Nachtmodus zu bestimmen. Falls das Cookie nicht vorhanden ist, wird die Einstellung des Browsers (<code>window.matchMedia('(prefers-color-scheme: dark)')</code>) ausgelesen und im Cookie gesetzt.</p>
</div>
<div id="user-1" class="section level3" number="6.3.2">
<h3 number="6.3.2"><span class="header-section-number">6.3.2</span> user</h3>
<p>Dieses Cookie enthält einen verhashten Nutzernamen und dient zur Identifikation eines angemeldeten Nutzers. Das Cookie wird gesetzt, wenn sich ein Nutzer anmeldet. Beim Start der Web-Applikation wird das Cookie verwendet, um den Nutzer automatisch anzumelden. Falls das Cookie nicht vorhanden ist, muss der Nutzer sich manuell anmelden.</p>
</div>
<div id="implementierung" class="section level3" number="6.3.3">
<h3 number="6.3.3"><span class="header-section-number">6.3.3</span> Implementierung</h3>
<p>Zur Verwaltung der Cookies wird die Bibliothek <a href="https://github.com/js-cookie/js-cookie">js-cookie</a> verwendet. Die Datei <code>www/js/cookies.js</code> enthält Hilfsfunktionen zum Lesen und Schreiben von Cookies und verbindet diese mit Inputwerten in Shiny. Die Hilfsfunktionen werden in R mithilfe von <code>shinyjs::extendShinyjs()</code> eingebunden.</p>
</div>
</div>
<div id="deployment-1" class="section level2" number="6.4">
<h2 number="6.4"><span class="header-section-number">6.4</span> Deployment</h2>
<p>Der Shiny Server liegt auf einer virtuellen Maschine (VirtualBox). Auf der virtuellen Maschine ist das Betriebssystem <em>Ubuntu 20.04.2 LTS</em> ohne grafische Benutzeroberfläche installiert. Änderungen am Shiny Server werden erst wirksam, nachdem der Shiny Server neugestartet wurde. Dazu kann folgender Befehl verwendet werden: <code>sudo systemctl restart shiny-server</code>.</p>
<p>Nachfolgend wird auf Ordner verwiesen, in denen für die Web-Applikation relevante Dateien liegen.</p>
<ul>
<li><p><code>/etc/shiny-server</code></p>
<p>Dieser Ordner enthält die Datei <code>shiny-server.conf</code>, mit der der Shiny Server konfiguriert werden kann. Hier kann der Port eingestellt werden, unter dem die Web-Applikation verfügbar gemacht wird. Der Port <code>3838</code> ist voreingestellt.</p></li>
</ul>
<p><br></p>
<ul>
<li><p><code>/srv/shiny-server/Sensotheka</code></p>
<p>Dieser Ordner enthält das Git-Repository, das die tatsächliche Web-Applikation darstellt. Es verweist auf das GitHub-Repository <code>https://github.com/PFA-WebApp/App.git</code> als Remote mit Namen <code>origin</code>. In der Datei <code>app.yml</code> müssen die in Tabelle @ref(tab:app-yml) aufgelisteten Einstellungen vorgenommen werden:</p>
<table>
<caption>(#tab:app-yml) Einstellungen in <code>app.yml</code></caption>
<colgroup>
<col width="28%" />
<col width="71%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Einstellung</th>
<th align="left">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">showcase</td>
<td align="left"><code>yes</code> für Showcasemodus (Passwörter für Standardnutzer werden eingeblendet, Standardnutzer können nicht gelöscht werden), <code>no</code> (voreingestellt) für Betriebsmodus</td>
</tr>
<tr class="even">
<td align="left">url</td>
<td align="left">Base-URL auf die QR-Codes verweisen. Hier sind Anpassungen zwingend notwendig.</td>
</tr>
</tbody>
</table></li>
</ul>
<p><br></p>
<ul>
<li><p><code>/etc/rstudio</code></p>
<p>Dieser Ordner enthält die Datei <code>rserver.conf</code>, mit der der RStudio Server konfiguriert werden kann. Hier kann der Port eingestellt werden, unter dem der RStudio Server verfügbar gemacht wird. Der Port <code>8787</code> ist voreingestellt. Der RStudio Server kann zur nachhaltigen Pflege und Weiterentwicklung der Web-Applikation genutzt werden. Dazu muss der Port aufgerufen werden. In der Login-Maske kann sich mithilfe des Nutzers <code>pfa</code> und seines Passworts eingeloggt werden. Danach öffnet sich die Online-Version der Entwicklungsumgebung RStudio, deren Funktionsumfang mit dem der Desktopversion identisch ist.</p>
<p>Für weitere Informationen siehe <a href="https://docs.rstudio.com/ide/server-pro/">https://docs.rstudio.com/ide/server-pro/</a>. Es ist zu beachten, dass es sich bei der installierten Version um die Open-Source-Version und <em>nicht</em> um die Pro-Version handelt.</p></li>
</ul>
<p><br></p>
<ul>
<li><p><code>/var/log/shiny-server/Sensotheka</code></p>
<p>Dieser Ordner enthält Log-Dateien, die vom Shiny Server erzeugt werden, wenn Komplikationen im Betrieb auftreten. Sollte das der Fall sein, ist es ratsam, diese zunächst zu konsultieren, bevor mit der Fehlerbehandlung begonnen wird.</p></li>
</ul>
<!--chapter:end:06-technical-guide.Rmd-->
</div>
</div>
<div id="discussion" class="section level1" number="7">
<h1 number="7"><span class="header-section-number">7</span> Diskussion und Ausblick</h1>
<p>Übergeordnetes Ziel des Projektes war es, eine Web-Applikation zu entwickeln, die die Sensorverwaltung des Fachgebietes Fahrzeugantriebe der Technischen Universität Berlin übernimmt. Dazu musste eine Vielzahl von Konzepten erstellt und umgesetzt werden, unter anderem die Abstraktion der Datenstruktur und deren Abbildung auf eine Datenbank. Die an die Web-Applikation erstellten Anforderungen wurden allesamt erfüllt und konnten in Rücksprache mit den Ansprechpartnern am Fachgebiet sogar erweitert werden.</p>
<p>Das Projekt schließt mit einer Diskussion der Ergebnisse und der Weise, auf die diese Ergebnisse erzielt wurden, ab. Rückblickend ist festzuhalten, dass der Umfang des Projektes - insbesondere durch zusätzliche Anforderungen - den verfügbaren zeitlichen Rahmen überstiegen hat. Während der Projektphase sind zusätzliche Anforderungen aufgetreten, die mit einem realistischen Qualitätsanspruch nicht umgesetzt werden konnten. Das Hauptaugenmerk bei der Entwicklung der Web-Applikation lag insbesondere auf der Gewährleistung der Funktionalität über den Rahmen des Projektes hinaus. Diesem Aspekt wurde die Implementierung zusätzlicher Funktionalität geringerer Qualität untergeordnet. Vor allen Dingen wurde das Layout, die Datenbankstruktur und Operationen auf der Datenbank optimiert. Das Layout ist zeitgemäß, konsistent und übersichtlich, sodass der Nutzer sich einfach zurechtfindet. Es überzeugt durch einen hohen Detailgrad. Die Datenbankstruktur ist redundanzfrei und konnte trotz gestiegener Anforderungen über das Projekt zielführend erweitert werden. Eine Vielzahl an Hilfsfunktionen sowie der kohärente Aufbau der Tabellen begünstigt darüber hinaus eine effiziente, zukünftige Erweiterung. Die logische Konsistenz der Daten wird des Weiteren durch den vielfältigen Einsatz von Datenbankbeschränkungen garantiert.</p>
<p>Die Struktur der Web-Applikation begünstigt daher nicht nur ihren zuverlässigen dauerhaften Einsatz sondern auch eine stetige Weiterentwicklung. Darüber hinaus wurde durch die sachgemäße Einrichtung der virtuellen Maschine der Grundstein für Folgeprojekte gelegt. Der Einstieg in das Projekt für mit R und der Entwicklung von Web-Applikationen unerfahrenen Personen ist sicherlich mit Hürden verbunden. Durch den vorliegenden Bericht und die durchdachte Struktur der Web-Applikation soll er jedoch so einfach wie möglich gemacht werden. Folgeprojekte können sich zum Beispiel mit den nachfolgenden Inhalten beschäftigen:</p>
<ul>
<li>Erweiterung der Datenstruktur um Stücklisten, um komplexere Beziehungen zwischen Elementen abbilden zu können</li>
<li>E-Mail-Integration für Registrierung, Passwort vergessen und Benachrichtigungen</li>
<li>Hinterlegen zusätzlicher Informationen für die Ausleihe (vorraussichtliches Rückgabedatum, Verwendungszweck etc.)</li>
<li>Export von Daten</li>
<li>Einstellen kritischer Bestände auf Nutzerebene</li>
<li>Integration zusätzlicher fachgebietspezifischer Anwendungen (Kalender, Dateiverwaltung etc.)</li>
</ul>
<p>Abschließend freuen wir uns, die fertige Web-Applikation dem Fachgebiet zu übergeben und sind gespannt, in welchem Umfang sie in Zukunft eingesetzt und sogar weiterentwickelt wird.</p>
<!--chapter:end:07-diskussion.Rmd-->
</div>
<div id="references" class="section level1" number="8">
<h1 number="8"><span class="header-section-number">8</span> Referenzen</h1>
<!--chapter:end:08-referenzen.Rmd-->
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-R-rmarkdown" class="csl-entry">
Allaire, JJ, Yihui Xie, Jonathan McPherson, Javier Luraschi, Kevin Ushey, Aron Atkins, Hadley Wickham, Joe Cheng, Winston Chang, and Richard Iannone. 2020. <em>Rmarkdown: Dynamic Documents for r</em>. <a href="https://github.com/rstudio/rmarkdown">https://github.com/rstudio/rmarkdown</a>.
</div>
<div id="ref-laudon2015" class="csl-entry">
Laudon, Kenneth C., Jane Price Laudon, and Detlef Schroeder. 2015. <em>Wirtschaftsinformatik - Eine Einführung</em>. 3rd ed. Pearson.
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Laudon, K.C.; Laudon, J.P.; Schroeder, D.: <em>Wirtschaftsinformatik - Eine Einführung</em>, Pearson, 2015, S. 295-300<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>SQLite Consortium: <em>Appropriate Uses for SQLite</em>, URL: <a href="https://www.sqlite.org/whentouse.html" class="uri">https://www.sqlite.org/whentouse.html</a>, Letzter Aufruf: 14.03.2021<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<!--bookdown:body:end-->
            </section>

          </div>
        </div>
      </div>
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
    </div>
  </div>
<!--bookdown:config-->

</body>

</html>
